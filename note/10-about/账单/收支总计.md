---
title: 收支总计
category: 个人记录
tags:
    - 个人信息
    - 账单
---

## 月度账单

```dataviewjs
let pages = dv.pages("#个人账单").where(p => p.group != 0);
let groups = pages.groupBy(p => p.group).sort(m => m.key, "desc");

function sum(arr) {
	let res = 0;
	for (let a of arr) {
		res += a;
	}
	return res;
}

dv.table(
	["月份", "总收入", "总支出", "结余"],
	groups.map( g =>
	[g.key, sum(g.rows.income), sum(g.rows.expend), (sum(g.rows.income)-sum(g.rows.expend)).toFixed(2)]
	)
);

```

## 每月明细

### 2023/10

```dataviewjs
dv.table(["文件名称", "时间", "收入", "支出"],
dv.pages("#个人账单").sort(p => p.date)
.where(p => p.group == 202310)
.map(p => [p.file.link, p.date, p.income, p.expend]));
```

